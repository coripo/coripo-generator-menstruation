{"version":3,"sources":["../src/menstruation.generator.js"],"names":["i18next","require","locales","Generator","dependencies","config","init","lng","locale","fallbackLng","initImmediate","resources","trl","key","store","data","t","id","name","description","inputs","title","fields","label","type","helper","getAdapter","primaryAdapterId","generate","event","Event","generatorId","color","since","OneDate","start","till","offsetDay","periodLength","overlap","internal","external","repeats","times","cycle","step","cycleLength","sequels","scale","offset","exports"],"mappings":"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","file":"menstruation.generator.js","sourcesContent":["const i18next = require('i18next');\nconst locales = require('../locales/index.js');\n\nconst Generator = function Generator(dependencies, config = {}) {\n  i18next.init({\n    lng: config.locale || 'en',\n    fallbackLng: 'en',\n    initImmediate: false,\n    resources: locales,\n  });\n  const trl = (key) => {\n    i18next.store.data = locales;\n    return i18next.t(key);\n  };\n  const id = 'coripo.coripo.generator.menstruation';\n  const name = trl('menstruation-generator.name');\n  const description = trl('menstruation-generator.description');\n  const inputs = [\n    {\n      title: trl('menstruation-generator.field-group.basic.title'),\n      fields: [\n        {\n          id: 'start',\n          label: trl('menstruation-generator.field-group.basic.field.start.label'),\n          type: 'date',\n        },\n        {\n          id: 'periodLength',\n          label: trl('menstruation-generator.field-group.basic.field.period-length.label'),\n          type: 'number',\n        },\n        {\n          id: 'cycleLength',\n          label: trl('menstruation-generator.field-group.basic.field.cycle-length.label'),\n          type: 'number',\n        },\n      ],\n    },\n  ];\n  const helper = {\n    getAdapter: dependencies.getAdapter,\n    primaryAdapterId: dependencies.primaryAdapterId,\n  };\n\n  const generate = (config) => {\n    const event = new dependencies.Event({\n      id: config.id,\n      generatorId: id,\n      title: trl('menstruation-generator.event.period-days.title'),\n      color: '#ee10f6',\n      since: new dependencies.OneDate(config.start, helper),\n      till: new dependencies.OneDate(config.start, helper).offsetDay(config.periodLength - 1),\n      overlap: { internal: 'trim', external: 'trim-forever' },\n      repeats: [{ times: -1, cycle: 'day', step: config.cycleLength }],\n      sequels: [\n        {\n          title: trl('menstruation-generator.event.peak-ovulation.title'),\n          color: '#00aeef',\n          since: { scale: 'day', offset: 10 },\n          till: { scale: 'day', offset: 14 },\n        },\n        {\n          title: trl('menstruation-generator.event.pre-period.title'),\n          color: '#f36',\n          since: { scale: 'day', offset: -2 },\n          till: { scale: 'day', offset: -1 },\n        },\n        {\n          title: trl('menstruation-generator.event.post-period.title'),\n          color: '#7e70ff',\n          since: { scale: 'day', offset: config.periodLength },\n          till: { scale: 'day', offset: config.periodLength + 1 },\n        },\n      ],\n    });\n    return event;\n  };\n\n  return { id, name, inputs, generate };\n};\n\nexports.Generator = Generator;\n"]}